{
  "config": "comprehend",
  "repo_dir": "/tmp/swebench_iu299bow/astropy__astropy",
  "wall_time_seconds": 99,
  "git_diff": "diff --git a/astropy/wcs/wcs.py b/astropy/wcs/wcs.py\nindex d3a06f2b31..46b4d824f7 100644\n--- a/astropy/wcs/wcs.py\n+++ b/astropy/wcs/wcs.py\n@@ -1220,6 +1220,11 @@ reduce these to 2 dimensions using the naxis kwarg.\n \n             xy = np.hstack([x.reshape((x.size, 1)) for x in axes])\n \n+            if 0 in xy.shape:\n+                if ra_dec_order and sky == 'output':\n+                    return (xy[:, 0], xy[:, 1])\n+                return [xy[:, i] for i in range(xy.shape[1])]\n+\n             if ra_dec_order and sky == 'input':\n                 xy = self._denormalize_sky(xy)\n             output = func(xy, origin)\n@@ -1235,6 +1240,8 @@ reduce these to 2 dimensions using the naxis kwarg.\n                 raise ValueError(\n                     \"When providing two arguments, the array must be \"\n                     \"of shape (N, {0})\".format(self.naxis))\n+            if 0 in xy.shape:\n+                return xy\n             if ra_dec_order and sky == 'input':\n                 xy = self._denormalize_sky(xy)\n             result = func(xy, origin)\n",
  "claude_output": {
    "type": "result",
    "subtype": "success",
    "is_error": false,
    "duration_ms": 96114,
    "duration_api_ms": 103597,
    "num_turns": 15,
    "result": "The fix looks correct. Here's a summary of the changes made to `astropy/wcs/wcs.py`:\n\n**In `_return_list_of_arrays`** (line 1223-1226): Added an early return when the input array has a zero dimension. For the `ra_dec_order` output case it returns a tuple of two empty arrays; otherwise a list of empty arrays indexed by axis.\n\n**In `_return_single_array`** (line 1243-1244): Added an early return when the input `xy` array has a zero dimension, returning the empty array directly.\n\n**Why this works:**\n- When `wcs_pix2world([], [], 0)` is called, `np.broadcast_arrays` creates `[array([]), array([])]`, then `np.hstack` produces shape `(0, 2)`.\n- Previously, this zero-row array was passed to the C library `wcs.p2s`, which fails with `InconsistentAxisTypesError` because it can't handle zero coordinates.\n- Now, the empty array is detected via `0 in xy.shape` and returned immediately with the correct shape, bypassing the C library call entirely.",
    "stop_reason": null,
    "session_id": "54e788d3-0f72-4a6e-b5d3-5d2d8f6135a7",
    "total_cost_usd": 0.5016249999999999,
    "usage": {
      "input_tokens": 17,
      "cache_creation_input_tokens": 17714,
      "cache_read_input_tokens": 452281,
      "output_tokens": 5803,
      "server_tool_use": {
        "web_search_requests": 0,
        "web_fetch_requests": 0
      },
      "service_tier": "standard",
      "cache_creation": {
        "ephemeral_1h_input_tokens": 17714,
        "ephemeral_5m_input_tokens": 0
      },
      "inference_geo": "",
      "iterations": [],
      "speed": "standard"
    },
    "modelUsage": {
      "claude-sonnet-4-6": {
        "inputTokens": 17,
        "outputTokens": 5803,
        "cacheReadInputTokens": 452281,
        "cacheCreationInputTokens": 17714,
        "webSearchRequests": 0,
        "costUSD": 0.48201299999999997,
        "contextWindow": 200000,
        "maxOutputTokens": 32000
      },
      "claude-haiku-4-5-20251001": {
        "inputTokens": 17627,
        "outputTokens": 397,
        "cacheReadInputTokens": 0,
        "cacheCreationInputTokens": 0,
        "webSearchRequests": 0,
        "costUSD": 0.019612,
        "contextWindow": 200000,
        "maxOutputTokens": 32000
      }
    },
    "permission_denials": [],
    "uuid": "1d66ec6c-18bd-454b-8da9-2207409b165f"
  },
  "session_id": "54e788d3-0f72-4a6e-b5d3-5d2d8f6135a7",
  "result_text": "The fix looks correct. Here's a summary of the changes made to `astropy/wcs/wcs.py`:\n\n**In `_return_list_of_arrays`** (line 1223-1226): Added an early return when the input array has a zero dimension. For the `ra_dec_order` output case it returns a tuple of two empty arrays; otherwise a list of empty arrays indexed by axis.\n\n**In `_return_single_array`** (line 1243-1244): Added an early return when the input `xy` array has a zero dimension, returning the empty array directly.\n\n**Why this works:**\n- When `wcs_pix2world([], [], 0)` is called, `np.broadcast_arrays` creates `[array([]), array([])]`, then `np.hstack` produces shape `(0, 2)`.\n- Previously, this zero-row array was passed to the C library `wcs.p2s`, which fails with `InconsistentAxisTypesError` because it can't handle zero coordinates.\n- Now, the empty array is detected via `0 in xy.shape` and returned immediately with the correct shape, bypassing the C library call entirely.",
  "total_cost_usd": 0.5016249999999999,
  "num_turns": 15
}